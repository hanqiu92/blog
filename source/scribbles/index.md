---
title: Scribbles
mathjax: true
date: 2020-01-01 12:00:00
---

## Modeling

(19/10/11) 图卷积网络(GCN)较适用于建模局部动力系统，似乎不太适用于端到端直接预测。

(19/11/20) 仿真是一种成本较高的建模方式，因此在进行仿真时也需要考虑建模中的核心权衡：应该考虑哪些要素、抛弃哪些要素？

(19/12/08) batching的作用：在供需都在平面上均匀分布时，可以降低pickup distance；但如果需求为单点，则batching不能降低pickup distance。

(19/12/08) model-driven：通常需要使用非线性优化校准(calibrate)，容易mis-specify；data-driven：对数据的分布有较强依赖。

(19/12/28) 如何保持一个特征（动作action）的作用的偏序：
1. 声明强结构、引入隐变量/参数，缺点在于计算复杂，容易mis-specify；
2. data-driven+局部线性化，缺点在于应用时可控空间小；
3. data-driven+加入辅助样本和相应损失函数（例如构造服从偏序关系的样本对）进行辅助训练，缺点在于不能完全保证偏序关系。
4. 需要进一步探索半结构(semi-structural)


## Inference & Control & Decision

(19/06/02) 在predict-then-optimize框架中，优化/控制器的迭代频率最好与预测器的迭代频率一致。例如，如果决策是实时的，那么模型最好保持相对实时的更新；否则一段时间过后数据分布可能会变化，导致模型预估精度下降。

(19/07/02) OR在实际应用中的思考：
1. 输入模型的准确度、决策的敏感度评估非常重要！
2. 拿到问题，第一步永远是明确关键结构和核心变量，尽快建立从核心变量到决策的映射。业务直觉的建立与持续迭代很重要。
3. 决策影响面越大，越需要谨慎，引入更仔细的仿真评估和灵敏度分析。

(19/07/29) 树模型的工作原理是找最优的分桶，而桶内数据点不做区分直接平均。因此可以认为是一种特征提取方式，分桶结果可以用作其他强表达模型的输入。

(20/01/01) 反事实(counterfactual)误差分析的套路是将$l(y_1-y_2,\hat{y}_1-\hat{y}_2)$拆分为$l(y_1,\hat{y}_1)$和$l(y_2,\hat{y}_2)$，再通过原有模型误差分析套路生成bound。主要区别在于需要分析决策倾向性(propensity score) $p(a|s)$对于样本分布的影响。

## Optimization

(19/11/14) primal/dual方法不一定非要在simplex上做局部搜索(local search)。如果问题本身或局部有更好的结构（例如组合性质），则应当利用局部结构加速优化进程。例子：二分图匹配中的KM算法。

(20/01/01) robust optimization思路整理:
1. 若每个单独的决策重要，但是预测的confidence不够，那么可以使用局部平均的方式提高预测精度。可以使用kNN、随机森林等方法。
2. DB提出的data-driven生成uncertainty set的思路是：假设参数服从某一分布，再通过假设检验给出分布的置信区间。个人感觉这种方式更适用于宏观决策、没有明确反馈的场景，不适用于实时控制场景。
3. model bootstrapping很难生成可以解析的uncertainty set，还是需要人工设计->怎么处理这个gap？
4. Xu论文中讨论的robust DP是转化为LP求解，只能处理reward不确定的情况，无法处理模型不确定的情况。有空需要进一步review adaptive opt。


## Transportation

(19/09/13) 城市出行中，regular需求更关注服务稳定性，而MaaS的优势虽然灵活和可定制化(也可能有更好的服务)，但无法保证稳定，因此MaaS的主要空间在于irregular需求。由于需求的高支付意愿来源于lack of alternatives，MaaS概念内部的不同mode将会形成强替代效应。

(19/11/20) 宏观基本图对应“稳态”，因此由于突发事件导致的交通流变化不应该根据宏观基本图进行判断，而应该基于动力学模型(PDE)甚至是仿真进行判断。

## Misc

(19/07/02) 大数据的作用有以下几点：
1. 由于存储原始数据变得可行，可以对历史数据进行更多事后的多维度的分析，数据的利用率得到提升。
2. 具有多源数据和实时数据流的处理能力，意味着可以进行更实时的决策。
本质上，仍然依赖于良好的直觉和业务认知！

(19/08/26) 与推荐/广告业务相比，城市服务业务的用户使用频率更低，因此数据量相对有限。于此同时，偏好结构更清晰：价格、时间、服务、稳定性。因此，structural modeling/stated preference仍有一定的必要性。

(19/12/21) (S)PDE的基本求解思路：
1. 对于空间问题，在值域逼近的话用有限差分(FDM)；在函数域逼近则用有限元(FEM)或者谱分解。
2. 如果有时间上的演化，则可将实数域上的PDE转化为函数域上(关于时间)的ODE。ODE中，每个无穷小时间片的演化对应一个函数域上的变换算子$A$，该算子在时间$t$的演化下组成算子半群$\\{e^{tA}\\}_t$。进而可以通过算子半群理论对算法的收敛性进行分析。
3. 对SPDE，需要掌握大规模随机采样的方式，特别是如何高效率对BM/brownian sheet进行采样。一种方式是通过circulant embedding+FFT进行精确采样。另一种方式是用Karhunen–Loève分解目标过程，然后分别采样来逼近。
